// [typedjson]  Version: 1.2.0-rc1 - 2018-12-09  
 !function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("typedjson",[],r):"object"==typeof exports?exports.typedjson=r():e.typedjson=r()}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r);var n="__typedJsonJsonObjectMetadataInformation__";function o(e){return!!~[Date,Number,String,Boolean].indexOf(e)}function i(e){return!!~[Float32Array,Float64Array,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array].indexOf(e)}function s(e,r){return e===r||e.prototype instanceof r}function a(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];"object"==typeof console&&"function"==typeof console.error?console.error.apply(console,[e].concat(r)):"object"==typeof console&&"function"==typeof console.log&&console.log.apply(console,["ERROR: "+e].concat(r))}function c(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];"object"==typeof console&&"function"==typeof console.warn?console.warn.apply(console,[e].concat(r)):"object"==typeof console&&"function"==typeof console.log&&console.log.apply(console,["WARNING: "+e].concat(r))}function u(e){return!(void 0===e||null===e)}function l(e,r){return"number"==typeof e?r===Number:"string"==typeof e?r===String:"boolean"==typeof e?r===Boolean:!!function(e){return"object"==typeof e}(e)&&e instanceof r}var p="object"==typeof Reflect&&"function"==typeof Reflect.getMetadata;function y(e){return"string"==typeof e.name?e.name:"undefined"}var f=function(){function e(e){this.dataMembers=new Map,this.knownTypes=new Set,this.isExplicitlyMarked=!1,this.isHandledWithoutAnnotation=!1,this.classType=e}return e.getJsonObjectName=function(r){var t=e.getFromConstructor(r);return y(t?t.classType:r)},e.getFromConstructor=function(r){var t=r.prototype;if(t){var o;if(t.hasOwnProperty(n)&&(o=t[n]),o&&o.isExplicitlyMarked)return o;if(e.doesHandleWithoutAnnotation(r)){var i=new e(r);return i.isExplicitlyMarked=!0,i}}},e.getKnownTypeNameFromType=function(r){var t=e.getFromConstructor(r);return y(t?t.classType:r)},e.doesHandleWithoutAnnotation=function(e){return o(e)||i(e)||e===DataView||e===ArrayBuffer},e}();function d(e,r,t){var o,i="@jsonMember on "+y(e.constructor)+"."+String(r);if("function"!=typeof e)if("function"!=typeof e[r])if(t&&(t.ctor||t.deserializer)){if(e.hasOwnProperty(n))o=e[n];else{o=new f(e.constructor);var s=e[n];s&&s.dataMembers.forEach(function(e,r){return o.dataMembers.set(r,e)}),Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:o})}t.deserializer||o.knownTypes.add(t.ctor),t.keyType&&o.knownTypes.add(t.keyType),t.elementType&&t.elementType.forEach(function(e){return o.knownTypes.add(e)}),o.dataMembers.set(t.name,t)}else a(i+": JsonMemberMetadata has unknown ctor.");else a(i+": cannot use a method property.");else a(i+": cannot use a static property.")}var h=function(){function e(){this._typeResolver=function(e,r){if(e.__type)return r.get(e.__type)},this._errorHandler=function(e){return a(e)}}return e.prototype.setNameResolver=function(e){this._nameResolver=e},e.prototype.setTypeResolver=function(e){if("function"!=typeof e)throw new TypeError("'typeResolverCallback' is not a function.");this._typeResolver=e},e.prototype.setErrorHandler=function(e){if("function"!=typeof e)throw new TypeError("'errorHandlerCallback' is not a function.");this._errorHandler=e},e.prototype.convertAsObject=function(e,r,t){var n=this;if(void 0===t&&(t="object"),"object"==typeof e&&null!==e){var o=r.selfConstructor,i=f.getFromConstructor(o),a=r.knownTypes;i&&(a=this._mergeKnownTypes(a,this._createKnownTypesMap(i.knownTypes)));var c=this._typeResolver(e,a);if(c&&s(c,o)&&(o=c,(i=f.getFromConstructor(c))&&(a=this._mergeKnownTypes(a,this._createKnownTypesMap(i.knownTypes)))),i&&i.isExplicitlyMarked){var l=i,p={};l.dataMembers.forEach(function(r,t){var o,i=e[t],s=y(l.classType)+"."+t;if(r.deserializer)o=r.deserializer(i);else{if(!r.ctor)throw new TypeError("Cannot deserialize "+s+" thers is no constructor nor deserlization function to use.");o=n.convertSingleValue(i,{selfConstructor:r.ctor,elementConstructor:r.elementType,keyConstructor:r.keyType,knownTypes:a},s)}u(o)?p[r.key]=o:r.isRequired&&n._errorHandler(new TypeError("Missing required member '"+s+"'."))});var d=void 0;if("function"==typeof i.initializerCallback)try{if(!(d=i.initializerCallback(p,e)))throw new TypeError("Cannot deserialize "+t+": 'initializer' function returned undefined/null, but '"+y(i.classType)+"' was expected.");if(!(d instanceof i.classType))throw new TypeError("Cannot deserialize "+t+":'initializer' returned '"+y(d.constructor)+"', but '"+y(i.classType)+"' was expected,and '"+y(d.constructor)+"' is not a subtype of '"+y(i.classType)+"'")}catch(e){return void this._errorHandler(e)}else d=this._instantiateType(o);return Object.assign(d,p),i.onDeserializedMethodName&&("function"==typeof d.constructor[i.onDeserializedMethodName]?d.constructor[i.onDeserializedMethodName]():this._errorHandler(new TypeError("onDeserialized callback '"+y(i.classType)+"."+i.onDeserializedMethodName+"' is not a method."))),d}var h={};return Object.keys(e).forEach(function(t){h[t]=n.convertSingleValue(e[t],{selfConstructor:e[t].constructor,knownTypes:r.knownTypes,elementConstructor:r.elementConstructor,keyConstructor:r.keyConstructor},t)}),h}this._errorHandler(new TypeError("Cannot deserialize "+t+": 'sourceObject' must be a defined object."))},e.prototype.convertSingleValue=function(e,r,t){void 0===t&&(t="object");var n=r.selfConstructor,o=e?y(e.constructor):"undefined";if(!u(e))return e;if(this._isDirectlyDeserializableNativeType(n)){if(e.constructor===n)return e;throw new TypeError(this._makeTypeErrorMessage(y(n),e.constructor,t))}if(n===Date){if("string"==typeof e||"number"==typeof e&&e>0)return new Date(e);this._throwTypeMismatchError("Date","an ISO-8601 string",o,t)}else if(n===Float32Array){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Float32Array(e);this._throwTypeMismatchError("Float32Array","a numeric source array",o,t)}else if(n===Float64Array){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Float64Array(e);this._throwTypeMismatchError("Float64Array","a numeric source array",o,t)}else if(n===Uint8Array){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Uint8Array(e.map(function(e){return~~e}));this._throwTypeMismatchError("Uint8Array","a numeric source array",o,t)}else if(n===Uint8ClampedArray){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Uint8ClampedArray(e.map(function(e){return~~e}));this._throwTypeMismatchError("Uint8ClampedArray","a numeric source array",o,t)}else if(n===Uint16Array){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Uint16Array(e.map(function(e){return~~e}));this._throwTypeMismatchError("Uint16Array","a numeric source array",o,t)}else if(n===Uint32Array){if(e instanceof Array&&e.every(function(e){return!isNaN(e)}))return new Uint32Array(e.map(function(e){return~~e}));this._throwTypeMismatchError("Uint32Array","a numeric source array",o,t)}else if(n===ArrayBuffer){if("string"==typeof e)return this._stringToArrayBuffer(e);this._throwTypeMismatchError("ArrayBuffer","a string source",o,t)}else if(n===DataView){if("string"==typeof e)return this._stringToDataView(e);this._throwTypeMismatchError("DataView","a string source",o,t)}else{if(n===Array){if(e instanceof Array)return this.convertAsArray(e,r,t);throw new TypeError(this._makeTypeErrorMessage(Array,e.constructor,t))}if(n===Set){if(e instanceof Array)return this.convertAsSet(e,r,t);this._throwTypeMismatchError("Set","Array",o,t)}else if(n===Map){if(e instanceof Array)return this.convertAsMap(e,r,t);this._throwTypeMismatchError("Map","a source array of key-value-pair objects",o,t)}else if(e&&"object"==typeof e)return this.convertAsObject(e,r,t)}},e.prototype.convertAsArray=function(e,r,t){var n=this;if(void 0===t&&(t="object"),!(e instanceof Array))return this._errorHandler(new TypeError(this._makeTypeErrorMessage(Array,e.constructor,t))),[];if(!r.elementConstructor||!r.elementConstructor.length)return this._errorHandler(new TypeError("Could not deserialize "+t+" as Array: missing constructor reference of Array elements.")),[];var o={selfConstructor:r.elementConstructor[0],elementConstructor:r.elementConstructor.length>1?r.elementConstructor.slice(1):[],knownTypes:r.knownTypes};return e.map(function(e){try{return n.convertSingleValue(e,o)}catch(e){return void n._errorHandler(e)}})},e.prototype.convertAsSet=function(e,r,t){var n=this;if(void 0===t&&(t="object"),!(e instanceof Array))return this._errorHandler(new TypeError(this._makeTypeErrorMessage(Array,e.constructor,t))),new Set;if(!r.elementConstructor||!r.elementConstructor.length)return this._errorHandler(new TypeError("Could not deserialize "+t+" as Set: missing constructor reference of Set elements.")),new Set;var o={selfConstructor:r.elementConstructor[0],elementConstructor:r.elementConstructor.length>1?r.elementConstructor.slice(1):[],knownTypes:r.knownTypes},i=new Set;return e.forEach(function(e,r){try{i.add(n.convertSingleValue(e,o,t+"["+r+"]"))}catch(e){n._errorHandler(e)}}),i},e.prototype.convertAsMap=function(e,r,t){var n=this;if(void 0===t&&(t="object"),e instanceof Array||this._errorHandler(new TypeError(this._makeTypeErrorMessage(Array,e.constructor,t))),!r.keyConstructor)return this._errorHandler(new TypeError("Could not deserialize "+t+" as Map: missing key constructor.")),new Map;if(!r.elementConstructor||!r.elementConstructor.length)return this._errorHandler(new TypeError("Could not deserialize "+t+" as Map: missing value constructor.")),new Map;var o={selfConstructor:r.keyConstructor,knownTypes:r.knownTypes},i={selfConstructor:r.elementConstructor[0],elementConstructor:r.elementConstructor.length>1?r.elementConstructor.slice(1):[],knownTypes:r.knownTypes},s=new Map;return e.forEach(function(e){try{var r=n.convertSingleValue(e.key,o);u(r)&&s.set(r,n.convertSingleValue(e.value,i,t+"["+r+"]"))}catch(e){n._errorHandler(e)}}),s},e.prototype._throwTypeMismatchError=function(e,r,t,n){throw void 0===n&&(n="object"),new TypeError("Could not deserialize "+n+" as "+e+": expected "+r+", got "+t+".")},e.prototype._makeTypeErrorMessage=function(e,r,t){return void 0===t&&(t="object"),"Could not deserialize "+t+": expected '"+("function"==typeof e?y(e):e)+"', got '"+("function"==typeof r?y(r):r)+"'."},e.prototype._instantiateType=function(e){return new e},e.prototype._mergeKnownTypes=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n=new Map;return r.forEach(function(r){r.forEach(function(r,t){e._nameResolver?n.set(e._nameResolver(r),r):n.set(t,r)})}),n},e.prototype._createKnownTypesMap=function(e){var r=this,t=new Map;return e.forEach(function(e){if(r._nameResolver)t.set(r._nameResolver(e),e);else{var n=f.getFromConstructor(e),o=n&&n.isExplicitlyMarked&&n.name?n.name:e.name;t.set(o,e)}}),t},e.prototype._isDirectlyDeserializableNativeType=function(e){return~[Number,String,Boolean].indexOf(e)},e.prototype.convertNativeObject=function(e){return e},e.prototype._stringToArrayBuffer=function(e){for(var r=new ArrayBuffer(2*e.length),t=new Uint16Array(r),n=0,o=e.length;n<o;n++)t[n]=e.charCodeAt(n);return r},e.prototype._stringToDataView=function(e){return new DataView(this._stringToArrayBuffer(e))},e}(),m=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e};var v=function(){function e(){this._typeHintEmitter=function(e,r,t,n){if(r.constructor!==t){var o=n&&n.name?n.name:y(r.constructor);e.__type=o}},this._errorHandler=function(e){return a(e)}}return e.prototype.setTypeHintEmitter=function(e){if("function"!=typeof e)throw new TypeError("'typeEmitterCallback' is not a function.");this._typeHintEmitter=e},e.prototype.setErrorHandler=function(e){if("function"!=typeof e)throw new TypeError("'errorHandlerCallback' is not a function.");this._errorHandler=e},e.prototype.convertSingleValue=function(e,r,t){if(void 0===t&&(t="object"),u(e)){if(l(e,r.selfType))return o(r.selfType)?e:r.selfType===ArrayBuffer?this.convertAsArrayBuffer(e):r.selfType===DataView?this.convertAsDataView(e):function(e){return e.selfType===Array}(r)?this.convertAsArray(e,r.elementTypes,t):function(e){return e.selfType===Set}(r)?this.convertAsSet(e,r.elementTypes[0],t):function(e){return e.selfType===Map}(r)?this.convertAsMap(e,r.keyType,r.elementTypes[0],t):i(r.selfType)?this.convertAsTypedArray(e):"object"==typeof e?this.convertAsObject(e,r,t):void 0;var n=y(r.selfType),s=y(e.constructor);this._errorHandler(new TypeError("Could not serialize '"+t+"': expected '"+n+"', got '"+s+"'."))}},e.prototype.convertAsObject=function(e,r,t){var n,o,i=this;if(n=e.constructor!==r.selfType&&e instanceof r.selfType?f.getFromConstructor(e.constructor):f.getFromConstructor(r.selfType)){var s=n;o={},n.dataMembers.forEach(function(r){if(r.serializer)o[r.name]=r.serializer(e[r.key]);else{if(!r.ctor)throw new TypeError("Could not serialize "+r.name+", there is no constructor nor serialization function to use.");o[r.name]=i.convertSingleValue(e[r.key],{selfType:r.ctor,elementTypes:r.elementType,keyType:r.keyType},y(s.classType)+"."+r.key)}})}else o=m({},e);return this._typeHintEmitter(o,e,r.selfType,n),o},e.prototype.convertAsArray=function(e,r,t){var n=this;if(void 0===t&&(t="object"),0===r.length||!r[0])throw new TypeError("Could not serialize "+t+" as Array: missing element type definition.");e.forEach(function(e,n){if(!l(e,r[0])){var o=y(r[0]),i=y(e.constructor);throw new TypeError("Could not serialize "+t+"["+n+"]: expected '"+o+"', got '"+i+"'.")}});var o={selfType:r[0],elementTypes:r.length>1?r.slice(1):[]};return t&&(t+="[]"),e.map(function(e){return n.convertSingleValue(e,o,t)})},e.prototype.convertAsSet=function(e,r,t){var n=this;if(void 0===t&&(t="object"),!r)throw new TypeError("Could not serialize "+t+" as Set: missing element type definition.");var o={selfType:r};t&&(t+="[]");var i=[];return e.forEach(function(e){var r=n.convertSingleValue(e,o,t);u(e)&&!u(r)||i.push(r)}),i},e.prototype.convertAsMap=function(e,r,t,n){var o=this;if(void 0===n&&(n="object"),!t)throw new TypeError("Could not serialize "+n+" as Map: missing value type definition.");if(!r)throw new TypeError("Could not serialize "+n+" as Map: missing key type definition.");var i={selfType:t,elementTypes:[t]},s={selfType:r};n&&(n+="[]");var a=[];return e.forEach(function(e,r){var t={key:o.convertSingleValue(r,s,n),value:o.convertSingleValue(e,i,n)};u(t.key)&&u(t.value)&&a.push(t)}),a},e.prototype.convertAsTypedArray=function(e){return Array.from(e)},e.prototype.convertAsArrayBuffer=function(e){return Array.from(new Uint16Array(e)).map(function(e){return String.fromCharCode(e)}).join("")},e.prototype.convertAsDataView=function(e){return this.convertAsArrayBuffer(e.buffer)},e}();function w(e){var r;function t(e){var t;if(e.prototype.hasOwnProperty(n))(t=e.prototype[n]).classType=e;else{t=new f(e);var o=e.prototype[n];o&&(o.dataMembers.forEach(function(e,r){return t.dataMembers.set(r,e)}),o.knownTypes.forEach(function(e){return t.knownTypes.add(e)})),Object.defineProperty(e.prototype,n,{enumerable:!1,configurable:!1,writable:!1,value:t})}t.isExplicitlyMarked=!0,t.onDeserializedMethodName=r.onDeserialized,t.initializerCallback=r.initializer,r.name&&(t.name=r.name),"string"==typeof r.knownTypes?t.knownTypeMethodName=r.knownTypes:r.knownTypes instanceof Array&&r.knownTypes.filter(function(e){return!!e}).forEach(function(e){return t.knownTypes.add(e)})}if(r="function"==typeof e?{}:e||{},"function"!=typeof e)return t;t(e)}function T(e,r){if(!(e instanceof Object)||"string"!=typeof r&&"symbol"!=typeof r)return function(r,t){var n,o=e||{},i="@jsonMember on "+y(r.constructor)+"."+String(t);if(o.hasOwnProperty("constructor")){if(!u(o.constructor))return void a(i+": cannot resolve specified property constructor at runtime.");p&&!s(o.constructor,Reflect.getMetadata("design:type",r,t))&&c(i+": detected property type does not match 'constructor' option."),n=o.constructor}else if(p){if(!(n=Reflect.getMetadata("design:type",r,t)))return void a(i+": cannot resolve detected property constructor at runtime.")}else if(!o.deserializer)return void a(i+": ReflectDecorators is required if no 'constructor' option is specified.");g(i,n)||d(r,t,{ctor:n,emitDefaultValue:o.emitDefaultValue||!1,isRequired:o.isRequired||!1,key:t.toString(),name:o.name||t.toString(),deserializer:o.deserializer,serializer:o.serializer})};var t=e,n="@jsonMember on "+y(t.constructor)+"."+String(r);if(p){var o=Reflect.getMetadata("design:type",t,r);o?g(n,o)||d(t,r,{ctor:o,key:r.toString(),name:r.toString()}):a(n+": could not resolve detected property constructor at runtime.")}else a(n+": ReflectDecorators is required if no 'constructor' option is specified.")}function g(e,r){return r===Array?(a(e+": property is an Array. Use the jsonArrayMember decorator to serialize this property."),!0):r===Set?(a(e+": property is a Set. Use the jsonSetMember decorator to serialize this property."),!0):r===Map&&(a(e+": property is a Map. Use the jsonMapMember decorator to serialize this property."),!0)}function A(e,r){return void 0===r&&(r={}),function(t,n){var o="@jsonArrayMember on "+y(t.constructor)+"."+String(n);if("function"==typeof e){var i=void 0===r.dimensions?1:r.dimensions;!isNaN(i)&&i<1?a(o+": 'dimensions' option must be at least 1."):p&&Reflect.getMetadata("design:type",t,n)!==Array?a(o+": property is not an Array."):d(t,n,{ctor:Array,elementType:function(e,r){var t=new Array(r).fill(Array,0,-1);return t[r-1]=e,t}(e,i),emitDefaultValue:r.emitDefaultValue||!1,isRequired:r.isRequired||!1,key:n.toString(),name:r.name||n.toString(),deserializer:r.deserializer,serializer:r.serializer})}else a(o+": could not resolve constructor of array elements at runtime.")}}function b(e,r){return void 0===r&&(r={}),function(t,n){var o="@jsonSetMember on "+y(t.constructor)+"."+String(n);"function"==typeof e?p&&Reflect.getMetadata("design:type",t,n)!==Set?a(o+": property is not a Set."):d(t,n,{ctor:Set,elementType:[e],emitDefaultValue:r.emitDefaultValue||!1,isRequired:r.isRequired||!1,key:n.toString(),name:r.name||n.toString(),deserializer:r.deserializer,serializer:r.serializer}):a(o+": could not resolve constructor of set elements at runtime.")}}function M(e,r,t){return void 0===t&&(t={}),function(n,o){var i="@jsonMapMember on "+y(n.constructor)+"."+String(o);"function"==typeof e?"function"==typeof r?p&&Reflect.getMetadata("design:type",n,o)!==Map?a(i+": property is not a Map."):d(n,o,{ctor:Map,elementType:[r],keyType:e,emitDefaultValue:t.emitDefaultValue||!1,isRequired:t.isRequired||!1,key:o.toString(),name:t.name||o.toString(),deserializer:t.deserializer,serializer:t.serializer}):a(i+": could not resolve constructor of map values at runtime."):a(i+": could not resolve constructor of map keys at runtime.")}}t.d(r,"TypedJSON",function(){return k}),t.d(r,"jsonObject",function(){return w}),t.d(r,"jsonMember",function(){return T}),t.d(r,"jsonArrayMember",function(){return A}),t.d(r,"jsonSetMember",function(){return b}),t.d(r,"jsonMapMember",function(){return M});var C=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},k=function(){function e(r,t){this.serializer=new v,this.deserializer=new h,this.globalKnownTypes=[],this.indent=0;var n=f.getFromConstructor(r);if(!n||!n.isExplicitlyMarked&&!n.isHandledWithoutAnnotation)throw new TypeError("The TypedJSON root data type must have the @jsonObject decorator used.");this.nameResolver=function(e){return y(e)},this.rootConstructor=r,this.errorHandler=function(e){return a(e)},t?this.config(t):e._globalConfig&&this.config({})}return e.parse=function(r,t,n){return new e(t,n).parse(r)},e.parseAsArray=function(r,t,n,o){return new e(t,n).parseAsArray(r,o)},e.parseAsSet=function(r,t,n){return new e(t,n).parseAsSet(r)},e.parseAsMap=function(r,t,n,o){return new e(n,o).parseAsMap(r,t)},e.toPlainJson=function(r,t,n){return new e(t,n).toPlainJson(r)},e.toPlainArray=function(r,t,n,o){return new e(t,o).toPlainArray(r,n)},e.toPlainSet=function(r,t,n){return new e(t,n).stringifyAsSet(r)},e.toPlainMap=function(r,t,n,o){return new e(n,o).stringifyAsMap(r,t)},e.stringify=function(r,t,n){return new e(t,n).stringify(r)},e.stringifyAsArray=function(r,t,n,o){return new e(t,o).stringifyAsArray(r,n)},e.stringifyAsSet=function(r,t,n){return new e(t,n).stringifyAsSet(r)},e.stringifyAsMap=function(r,t,n,o){return new e(n,o).stringifyAsMap(r,t)},e.setGlobalConfig=function(e){this._globalConfig?Object.assign(this._globalConfig,e):this._globalConfig=e},e.prototype.config=function(r){e._globalConfig&&(r=C({},e._globalConfig,r)).knownTypes&&e._globalConfig.knownTypes&&(r.knownTypes=Array.from(new Set(r.knownTypes.concat(e._globalConfig.knownTypes)))),r.errorHandler&&(this.errorHandler=r.errorHandler,this.deserializer.setErrorHandler(r.errorHandler),this.serializer.setErrorHandler(r.errorHandler)),r.replacer&&(this.replacer=r.replacer),r.typeResolver&&this.deserializer.setTypeResolver(r.typeResolver),r.typeHintEmitter&&this.serializer.setTypeHintEmitter(r.typeHintEmitter),r.indent&&(this.indent=r.indent),r.nameResolver&&(this.nameResolver=r.nameResolver,this.deserializer.setNameResolver(r.nameResolver)),r.knownTypes&&(r.knownTypes.forEach(function(e,r){void 0!==e&&null!==e||c("TypedJSON.config: 'knownTypes' contains an undefined/null value (element "+r+").")}),this.globalKnownTypes=r.knownTypes)},e.prototype.parse=function(e){var r,t=this,n=JSON.parse(e),o=f.getFromConstructor(this.rootConstructor),i=new Map;this.globalKnownTypes.filter(function(e){return e}).forEach(function(e){i.set(t.nameResolver(e),e)}),o&&o.knownTypes.forEach(function(e){i.set(t.nameResolver(e),e)});try{r=this.deserializer.convertSingleValue(n,{selfConstructor:this.rootConstructor,knownTypes:i})}catch(e){this.errorHandler(e)}return r},e.prototype.parseAsArray=function(e,r){void 0===r&&(r=1);var t=JSON.parse(e);return t instanceof Array?this.deserializer.convertAsArray(t,{selfConstructor:Array,elementConstructor:new Array(r-1).fill(Array).concat(this.rootConstructor),knownTypes:this._mapKnownTypes(this.globalKnownTypes)}):(this.errorHandler(new TypeError("Expected 'json' to define an Array, but got "+typeof t+".")),[])},e.prototype.parseAsSet=function(e){var r=JSON.parse(e);return r instanceof Array?this.deserializer.convertAsSet(r,{selfConstructor:Array,elementConstructor:[this.rootConstructor],knownTypes:this._mapKnownTypes(this.globalKnownTypes)}):(this.errorHandler(new TypeError("Expected 'json' to define a Set (using an Array), but got "+typeof r+".")),new Set)},e.prototype.parseAsMap=function(e,r){var t=JSON.parse(e);return t instanceof Array?this.deserializer.convertAsMap(t,{selfConstructor:Array,elementConstructor:[this.rootConstructor],knownTypes:this._mapKnownTypes(this.globalKnownTypes),keyConstructor:r}):(this.errorHandler(new TypeError("Expected 'json' to define a Set (using an Array), but got "+typeof t+".")),new Map)},e.prototype.toPlainJson=function(e){try{return this.serializer.convertSingleValue(e,{selfType:this.rootConstructor})}catch(e){this.errorHandler(e)}},e.prototype.toPlainArray=function(e,r){void 0===r&&(r=1);try{var t=new Array(r-1).fill(Array).concat(this.rootConstructor);return this.serializer.convertAsArray(e,t)}catch(e){this.errorHandler(e)}},e.prototype.toPlainSet=function(e){try{return this.serializer.convertAsSet(e,this.rootConstructor)}catch(e){this.errorHandler(e)}},e.prototype.toPlainMap=function(e,r){try{return this.serializer.convertAsMap(e,r,this.rootConstructor)}catch(e){this.errorHandler(e)}},e.prototype.stringify=function(e){var r=this.toPlainJson(e);return void 0===r?"":JSON.stringify(r,this.replacer,this.indent)},e.prototype.stringifyAsArray=function(e,r){return JSON.stringify(this.toPlainArray(e,r),this.replacer,this.indent)},e.prototype.stringifyAsSet=function(e){return JSON.stringify(this.toPlainSet(e),this.replacer,this.indent)},e.prototype.stringifyAsMap=function(e,r){return JSON.stringify(this.toPlainMap(e,r),this.replacer,this.indent)},e.prototype._mapKnownTypes=function(e){var r=this,t=new Map;return e.filter(function(e){return e}).forEach(function(e){return t.set(r.nameResolver(e),e)}),t},e}()}])});
//# sourceMappingURL=typedjson.min.js.map 